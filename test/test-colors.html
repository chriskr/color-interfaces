<!DOCTYPE html>
<title>test</title>
<style>
  body {
    background-color: hsl(0, 0%, 85%);
  }

  span {
    display: inline-block;
    font: menu;
    margin: 5px;
    min-width: 160px;
    padding: 8px;
  }

  [style*='background-color'] {
    border: 1px solid hsl(0, 0%, 50%);
    min-width: 120px;
  }
</style>

<script>
  window.module = {};
</script>
<script src="../dist/main.min.js"></script>
<script>
  window.onload = () => {
    const { default: Color } = window.module.exports;

    window.Color = Color;

    const appendSample = (cssColor, isDark) => {
      const span = document.createElement('span');
      span.style.backgroundColor = cssColor;
      if (isDark) {
        span.style.color = 'white';
      }
      span.textContent = cssColor;
      document.body.appendChild(span);
    };

    const appendText = (text) => {
      const span = document.createElement('span');
      span.textContent = text;
      document.body.appendChild(span);
    };

    const formatHslOrHsvArray = (array) =>
      array
        .map((value, index) => (index === 0 ? value : value.toFixed(2)))
        .join(', ');

    const appendSamples = (color) => {
      const isDark = color.getLuminance() < 0.35;
      appendSample(color.rgb.toCss(), isDark);
      appendSample(color.hsl.toCss(), isDark);
      appendSample(color.hex.toCss(), isDark);
      const contrast = color.getContrastRatio(isDark ? white : black);
      appendText('getting hsv ' + formatHslOrHsvArray(c.hsv.get()));
    };

    const c = new Color();
    const white = new Color('white');
    const black = new Color('black');

    for (let i = 0; i <= 10; i++) {
      for (let j = 0; j <= 10; j++) {
        for (let k = 0; k < 6; k++) {
          document.body.appendChild(document.createElement('hr'));
          const hsv = [60 * k, i * 0.1, j * 0.1];
          c.hsv.set(hsv);
          const rgb = c.rgb.get();
          const hsl = c.hsl.get();
          appendText('setting hsv ' + formatHslOrHsvArray(hsv));
          appendSamples(c);
          document.body.appendChild(document.createElement('div'));
          appendText('setting rgb ' + rgb.join(', '));
          c.rgb.set(rgb);
          appendSamples(c);
          document.body.appendChild(document.createElement('div'));
          appendText('setting hsl ' + formatHslOrHsvArray(hsl));
          c.hsl.set(hsl);
          appendSamples(c);
        }
      }
    }
  };
</script>
